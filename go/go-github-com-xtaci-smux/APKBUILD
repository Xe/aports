# Contributor: Christine Dodrill <me@christine.website>
# Maintainer: Christine Dodrill <me@christine.website>
_gopkg=github.com/xtaci/smux
_goimport=smux

pkgname=go-github-com-xtaci-smux
pkgver=1.0.6
pkgrel=0
pkgdesc="Simple Stream Multiplexing for golang"
url="https://github.com/xtaci/smux"
arch="noarch"
license="mit"
depends="go gopath go-github-com-pkg-errors"
makedepends=""
install=""
source="$_goimport-$pkgver.tar.gz::https://github.com/xtaci/smux/archive/v1.0.6.tar.gz"
builddir="$srcdir/"

build() {
        cd "$builddir"
}

package() {
        cd "$builddir"
        mkdir -p "$pkgdir"/usr/share/gopath/src/"$_gopkg"
        cp -rf "$_goimport"-"$pkgver"/* "$pkgdir"/usr/share/gopath/src/"$_gopkg"
}

check() {
        cd "$builddir"
        export GOPATH=/usr/share/gopath:"$builddir"

        mkdir -p src/"$_gopkg"
        cp -rf $_goimport-"$pkgver"/* src/"$_gopkg"
        go test -v "$_gopkg"/...
}
sha512sums="f6ff46dc7ad0b83b8433a849300246a461b1a23617af0045c8b5b2d34e93368dba126cbb1641327e424744606a49402d5c5f70d6af51c3a29a1d1d63f49dc8e2  smux-1.0.6.tar.gz"
